<style>
    @font-face {
        font-family: 'Sensation';
        src: url('../../fonts/Sansation.ttf') format('truetype');
    }

    #statusContainer {
        border: 1px solid rgb(2, 179, 2);
        color: rgb(2, 179, 2);
        border-radius: 5px;
        padding: 4px;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .custom-btn {
        transition: background-color 0.3s;
        /* Transição suave para o efeito de hover */
    }

    .custom-btn:hover {
        background-color: #DCCCC3;
        color: #000000;
        border: 1px solid #000000;
        /* Ajuste o padding desejado para o efeito de hover */
    }

    .cf-Input {
        border: 0;
        height: 45px;
        width: auto;
        margin: 0;
        color: transparent;
        cursor: pointer;
    }

    .cf-Input::-webkit-file-upload-button {
        visibility: hidden;
    }

    .cf-Input::before {
        content: 'Escolher arquivos';
        display: inline-block;
        background: #DCCCC3;
        color: #000000;
        border: 1px solid #00000027;
        border-radius: 5px;
        padding: 4px 8px;
        outline: none;
        white-space: nowrap;
        cursor: pointer;
        transform: translateX(-10px);
    }

    .cf-Input:hover::before {
        background: #00000027;
    }

    .cf-Input:active::before {
        background: #0000004d;
    }

    .cf-Input:focus::before {
        box-shadow: 0 0 0 0.2rem rgba(0, 0, 0, 0.25);
    }

    #submitButton {
        background-color: #DCCCC3;
        border: 1px solid #00000027;
        color: #000000;
        position: relative;
        padding: 4px 8px;
        transition: padding 0.3s;
        border-radius: 5px;
    }

    /* Estilo para o ícone dentro do botão */
    #submitButton .fas {
        margin-right: 8px;
        /* Espaçamento entre o ícone e o texto */
    }

    /* Estilo do botão no hover */
    #submitButton:hover {
        background-color: #b1a39c;
        /* Nova cor de fundo no hover */
        color: #ffffff;
        padding: 6px 10px;
        /* Cor do texto no hover */
    }

    /* Efeito de elevação no hover */
    #submitButton:hover::before {
        content: '';
        position: absolute;
        top: -5px;
        /* Ajuste a posição conforme necessário */
        left: -5px;
        /* Ajuste a posição conforme necessário */
        right: -5px;
        /* Ajuste a posição conforme necessário */
        bottom: -5px;
        /* Ajuste a posição conforme necessário */
        border: 2px solid #00000027;
        z-index: -1;
        transition: all 0.3s;
    }
</style>


<!-- Begin Page Content -->
<div class="d-flex flex-column flex-xl-row p-4 align-items-start">

    <div class="col-12  container">
        <div class="col-12 row">
            <!-- Lista de Anúncios -->
            <div class="col-12 col-xl-8 pl-4 pr-4 ml-xl-4 mt-4 d-flex flex-column">

                <!-- Exemplo de Card de Anúncio -->
                <div class=" mb-4" style="border: 1px solid #00000027;border-radius:10px;">
                    <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                        <ol class="carousel-indicators">
                            <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                            <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                            <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                        </ol>
                        <div class="carousel-inner" style="border-radius: 10px 10px 0 0 ;">
                            <div class="carousel-item active">
                                <img src="/sb-admin-2/img/{{imagePath}}" class="d-block w-100" alt="...">
                            </div>
                            <div class="carousel-item">
                                <img src="/sb-admin-2/img/{{imagePath}}" class="d-block w-100" alt="...">
                            </div>
                            <div class="carousel-item">
                                <img src="/sb-admin-2/img/{{imagePath}}" class="d-block w-100" alt="...">
                            </div>
                        </div>
                        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button"
                            data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button"
                            data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                    <div class="card-body pb-0 ">
                        <h1 style="color: #000000; font-weight:700; font-family:'Sensation'; font-size:25px;">{{title}}
                        </h1>
                        <p class="card-text">{{description}}.</p>
                        <hr>
                        <div>
                            <h1 class="mb-4 mt-4"
                                style="color: #000000; font-weight:700; font-family:'Sensation'; font-size:20px;">O que
                                esse imovel oferece</h1>
                            <div class="row">
                                <div class="col-md-6">
                                    <ul class="list-unstyled" style="padding: 0;">
                                        <li class="mt-2"><i class="fas fa-ruler-combined fa-lg mr-2"></i>
                                            Área Construída: <strong>{{builtUpArea}} m²</strong> </li>
                                        <li class="mt-2"><i class="fas fa-bath fa-lg  mr-2"></i>
                                            Número de Banheiros: <strong>{{bathNumber}}</strong></li>
                                        <li class="mt-2"><i class="fas fa-door-open fa-lg  mr-2"></i>
                                            Número de Cômodos: <strong>{{roomNumber}}</strong></li>
                                        <li class="mt-2"><i class="fas fa-car fa-lg  mr-2"></i>
                                            Vagas na Garagem: <strong>{{parkingSpaces}}</strong></li>
                                        <li class="mt-2"><i class="fas fa-home fa-lg  mr-2"></i>
                                            <strong>{{propertyTypeName}}</strong>
                                        </li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <ul class="list-unstyled" style="padding: 0;">
                                        <li class="mt-2"><i class="fas fa-sun fa-lg  mr-2"></i> Incidência
                                            Solar <strong>{{solarIncidence}}</strong> </li>
                                        <li class="mt-2"><i class="fas fa-couch fa-lg  mr-2"></i>
                                            <strong>{{furnished}}</strong>
                                        </li>
                                        <li class="mt-2"><i class="fas fa-swimming-pool fa-lg  mr-2"></i>
                                            <strong>{{pool}}</strong> Piscina
                                        </li>
                                        <li class="mt-2"><i class="fas fa-fire fa-lg  mr-2"></i>
                                            <strong>{{barbecue}}</strong> Churrasqueira
                                        </li>
                                        <li class="mt-2"><i class="fas fa-basketball-ball fa-lg  mr-2"></i>
                                            <strong>{{sportsCourt}}</strong> Quadra Esportiva
                                        </li>
                                    </ul>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <!-- Fim do Exemplo de Card de Anúncio -->
            </div>

            <div class="col-12 col-xl-3 pt-0 pt-xl-4 ml-2 ml-xl-4 d-flex flex-column">
                <div class="pl-4 pt-4 pl-4 h-auto w-auto" style="border-radius: 10px; border:1px solid #00000027">
                    <h1 style="color: #000000; font-weight:700; font-family:'Sensation'; font-size:30px;"><strong>R$
                            {{businessValue}}</strong></h1>
                    <ul class="list-unstyled mt-2">
                        <li class="mt-2"><i class="fas fa-tags fa-sm mr-1"></i> <strong>{{businessType}}</strong></li>
                        <li class="mt-2"><i class="fas fa-calendar-alt fa-sm mr-1"></i> Publicado em
                            <strong>{{publiDate}}</strong>
                        </li>
                        <li class="mt-2"><i class="fas fa-map-marker-alt fa-sm mr-1"></i> <strong>{{address}}</strong>
                        </li>
                    </ul>
                </div>

                <button id="favorite-button" class="btn top-0 end-0 mt-2" data-logged="{{isLogged}}" data-advertising-id="{{advertisingId}}"
                    name="favorite-input-{{advertisingId}}" style="border: 1px solid #00000027; z-index: 1; background-color: #f8f9fc;">
                    <i class="fas fa-heart"></i>
                    <span class="ml-2">Favoritar</span>
                    {{favoriteButtonForm}}
                </button>


                <div class="pl-4 pt-4 mt-4 h-auto" style="border-radius: 10px; border:1px solid #00000027">
                    <h1 style="color: #000000; font-weight:700; font-family:'Sensation'; font-size:20px;">Informações de
                        Contato</h1>

                    <ul class="list-unstyled">
                        <li><i class="fas fa-user fa-lg mr-2 mt-4"></i> <strong>{{name}}</strong></li>
                        {{contactInformations}}
                    </ul>

                </div>

            </div>

        </div>
    </div>

</div>
<!-- /.container-fluid -->

{{favoriteVisitorScript}}




<script>
    document.addEventListener("DOMContentLoaded", function() {

        const favoriteButton = document.getElementById("favorite-button");
        const isLogged = favoriteButton.dataset.logged;

        if(isLogged == "true"){

            const advertisingId =  favoriteButton.dataset.advertisingId;

            console.log(advertisingId);

            const favoriteIcon = favoriteButton.querySelector("i");

            const favoriteInput = favoriteButton.querySelector("input");

            favoriteIcon.style.color = favoriteInput.checked ? "red" : "#858796";


            const favoriteLabel = favoriteButton.querySelector("span");
            favoriteLabel.innerHTML = favoriteInput.checked ? "Desfavoritar" : "Favoritar";


            favoriteButton.addEventListener("click", async (event) => {
                event.preventDefault();

                favoriteInput.checked = !favoriteInput.checked

                createFavoriteEvent(favoriteInput, advertisingId);
            });



            function createFavoriteEvent(advertisingFavoriteInput, advertisingId) {

                Swal.fire({
                    text: `Deseja ${advertisingFavoriteInput.checked ? "favoritar" : "desfavoritar"} anúncio?`,
                    showCancelButton: true,
                    cancelButtonText: "Cancelar",
                    confirmButtonText: "Confirmar",
                    position: "center"
                }).then(async (result) => {
        
                    if (result.isConfirmed) {
        
                        Swal.fire({
                            title: `${advertisingFavoriteInput.checked ? "Favoritando" : "Desfavoritando"} anúncio...`,
                            didOpen: async () => {
                                Swal.showLoading();
                            },
                            allowOutsideClick: () => !Swal.isLoading(),
                        });
        
        
                        const data = await editFavorite(advertisingFavoriteInput, advertisingId);
        
                        Swal.fire({
                            title: data.message,
                            text: "",
                            icon: `${data.success == true ? "success" : "error"}`,
                            position: "center",
                        }).then((result) => {
                            if (result.isConfirmed) {
                                window.location.reload();
                            }
                        });
                    } else {
                        advertisingFavoriteInput.checked = !advertisingFavoriteInput.checked;
                    }
                });
        
            }
        
            async function editFavorite(advertisingFavoriteInput, advertisingId) {
        
                let checked = advertisingFavoriteInput.checked ? "true" : "false";
        
                try {
        
                    let response = await fetch("/api/news/favorite", {
                        method: "POST",
                        body: JSON.stringify({ advertisingId: advertisingId, favorite: checked }),
                    });
        
                    const data = await response.json();
                    return data;
                }
        
                catch (error) {
                    const data = {
                        success: false,
                        message: "Erro na conexão. Tente novamente."
                    };
                    return data;
                }
            }

        }


    });


</script>



